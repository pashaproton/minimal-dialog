{
  "version": 3,
  "sources": ["../../src/index.js"],
  "sourcesContent": ["const DEFAULT_TRIGGER_SELECTOR = \"data-dialog\";\n\nconst timeoutIds = {};\n\nconst isOutsideDialog = (dialogElement, e) => {\n  const rect = dialogElement.getBoundingClientRect();\n  return (\n    e.clientX < rect.left ||\n    e.clientX > rect.right ||\n    e.clientY < rect.top ||\n    e.clientY > rect.bottom\n  );\n};\n\nconst handleDialogClose = dialogElement => {\n  const dialogId = dialogElement.getAttribute(\"id\");\n  if (!timeoutIds[dialogId]) {\n    dialogElement.classList.remove(\"visible\");\n    timeoutIds[dialogId] = window.setTimeout(() => {\n      dialogElement.close();\n      delete timeoutIds[dialogId];\n    }, 300);\n  }\n};\n\nconst handleDialogClick = (dialogElement, e) => {\n  if (isOutsideDialog(dialogElement, e)) {\n    handleDialogClose(dialogElement);\n  }\n};\n\nconst bindDialogEvents = dialogElement => {\n  dialogElement.addEventListener(\"click\", e => handleDialogClick(dialogElement, e));\n  dialogElement.querySelectorAll(\"[data-dialog-close]\").forEach(el => {\n    el.addEventListener(\"click\", () => handleDialogClose(dialogElement));\n  });\n};\n\nconst createCloseButton = dialogElement => {\n  const closeBtn = document.createElement(\"a\");\n  closeBtn.classList.add(\"close\");\n  closeBtn.setAttribute(\"aria-label\", \"Close dialog\");\n  closeBtn.setAttribute(\"title\", \"Close dialog\");\n  closeBtn.setAttribute(\"type\", \"button\");\n  closeBtn.setAttribute(\"data-dialog-close\", \"\");\n  dialogElement.appendChild(closeBtn);\n};\n\nconst handleTriggerClick = e => {\n  console.log(\"handleTriggerClick\");\n  const dialogElement = document.getElementById(e.target.dataset.dialog);\n  dialogElement.showModal();\n  dialogElement.classList.add(\"visible\");\n};\n\nconst bindTriggerEvents = trigger => trigger.addEventListener(\"click\", handleTriggerClick);\n\nconst getDialogTriggers = () => document.querySelectorAll(`[${DEFAULT_TRIGGER_SELECTOR}]`);\n\nconst processTrigger = trigger => {\n  bindTriggerEvents(trigger);\n  const dialogElement = document.getElementById(trigger.dataset.dialog);\n  if (dialogElement) {\n    createCloseButton(dialogElement);\n    bindDialogEvents(dialogElement);\n  }\n};\n\nconst observer = new MutationObserver(mutations => {\n  for (const mutation of mutations) {\n    if (mutation.type === 'childList') {\n      mutation.addedNodes.forEach(node => {\n        if (node.hasAttribute(DEFAULT_TRIGGER_SELECTOR)) {\n          bindTriggerEvents(node);\n          processTrigger(node);\n        }\n\n        node.querySelectorAll(`[${DEFAULT_TRIGGER_SELECTOR}]`).forEach(processTrigger);\n      });\n    }\n  }\n});\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  observer.observe(document.body, {\n    childList: true,\n    subtree: true,\n  });\n\n  getDialogTriggers().forEach(processTrigger);\n});\n\ndocument.addEventListener(\"keydown\", e => {\n  if (e.key === \"Escape\") {\n    const openedDialog = document.querySelector(\"dialog.visible\");\n    if (openedDialog) {\n      e.preventDefault();\n      handleDialogClose(openedDialog);\n    }\n  }\n});\n"],
  "mappings": "MAAA,IAAMA,EAA2B,cAE3BC,EAAa,CAAC,EAEdC,EAAkB,CAACC,EAAeC,IAAM,CAC5C,IAAMC,EAAOF,EAAc,sBAAsB,EACjD,OACEC,EAAE,QAAUC,EAAK,MACjBD,EAAE,QAAUC,EAAK,OACjBD,EAAE,QAAUC,EAAK,KACjBD,EAAE,QAAUC,EAAK,MAErB,EAEMC,EAAoBH,GAAiB,CACzC,IAAMI,EAAWJ,EAAc,aAAa,IAAI,EAC3CF,EAAWM,CAAQ,IACtBJ,EAAc,UAAU,OAAO,SAAS,EACxCF,EAAWM,CAAQ,EAAI,OAAO,WAAW,IAAM,CAC7CJ,EAAc,MAAM,EACpB,OAAOF,EAAWM,CAAQ,CAC5B,EAAG,GAAG,EAEV,EAEMC,EAAoB,CAACL,EAAeC,IAAM,CAC1CF,EAAgBC,EAAeC,CAAC,GAClCE,EAAkBH,CAAa,CAEnC,EAEMM,EAAmBN,GAAiB,CACxCA,EAAc,iBAAiB,QAASC,GAAKI,EAAkBL,EAAeC,CAAC,CAAC,EAChFD,EAAc,iBAAiB,qBAAqB,EAAE,QAAQO,GAAM,CAClEA,EAAG,iBAAiB,QAAS,IAAMJ,EAAkBH,CAAa,CAAC,CACrE,CAAC,CACH,EAEMQ,EAAoBR,GAAiB,CACzC,IAAMS,EAAW,SAAS,cAAc,GAAG,EAC3CA,EAAS,UAAU,IAAI,OAAO,EAC9BA,EAAS,aAAa,aAAc,cAAc,EAClDA,EAAS,aAAa,QAAS,cAAc,EAC7CA,EAAS,aAAa,OAAQ,QAAQ,EACtCA,EAAS,aAAa,oBAAqB,EAAE,EAC7CT,EAAc,YAAYS,CAAQ,CACpC,EAEMC,EAAqB,GAAK,CAC9B,QAAQ,IAAI,oBAAoB,EAChC,IAAMV,EAAgB,SAAS,eAAe,EAAE,OAAO,QAAQ,MAAM,EACrEA,EAAc,UAAU,EACxBA,EAAc,UAAU,IAAI,SAAS,CACvC,EAEMW,EAAoBC,GAAWA,EAAQ,iBAAiB,QAASF,CAAkB,EAEnFG,EAAoB,IAAM,SAAS,iBAAiB,IAAIhB,CAAwB,GAAG,EAEnFiB,EAAiBF,GAAW,CAChCD,EAAkBC,CAAO,EACzB,IAAMZ,EAAgB,SAAS,eAAeY,EAAQ,QAAQ,MAAM,EAChEZ,IACFQ,EAAkBR,CAAa,EAC/BM,EAAiBN,CAAa,EAElC,EAEMe,EAAW,IAAI,iBAAiBC,GAAa,CACjD,QAAWC,KAAYD,EACjBC,EAAS,OAAS,aACpBA,EAAS,WAAW,QAAQC,GAAQ,CAC9BA,EAAK,aAAarB,CAAwB,IAC5Cc,EAAkBO,CAAI,EACtBJ,EAAeI,CAAI,GAGrBA,EAAK,iBAAiB,IAAIrB,CAAwB,GAAG,EAAE,QAAQiB,CAAc,CAC/E,CAAC,CAGP,CAAC,EAED,SAAS,iBAAiB,mBAAoB,IAAM,CAClDC,EAAS,QAAQ,SAAS,KAAM,CAC9B,UAAW,GACX,QAAS,EACX,CAAC,EAEDF,EAAkB,EAAE,QAAQC,CAAc,CAC5C,CAAC,EAED,SAAS,iBAAiB,UAAW,GAAK,CACxC,GAAI,EAAE,MAAQ,SAAU,CACtB,IAAMK,EAAe,SAAS,cAAc,gBAAgB,EACxDA,IACF,EAAE,eAAe,EACjBhB,EAAkBgB,CAAY,EAElC,CACF,CAAC",
  "names": ["DEFAULT_TRIGGER_SELECTOR", "timeoutIds", "isOutsideDialog", "dialogElement", "e", "rect", "handleDialogClose", "dialogId", "handleDialogClick", "bindDialogEvents", "el", "createCloseButton", "closeBtn", "handleTriggerClick", "bindTriggerEvents", "trigger", "getDialogTriggers", "processTrigger", "observer", "mutations", "mutation", "node", "openedDialog"]
}
